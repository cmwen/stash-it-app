---
import BaseLayout from '../layouts/BaseLayout.astro'
---

<BaseLayout title="Install / Getting Started">
  <section>
    <h2>Install & Build Guide</h2>

    <p class="lead">Get Stash It on your device or build it from source.</p>

    <div class="card highlight">
      <h3>ðŸ“¦ Install via Obtainium (Recommended)</h3>
      <p><strong>Stash It is not published to Google Play Store.</strong> We recommend using <a href="https://github.com/ImranR98/Obtainium" target="_blank" rel="noopener" style="color:var(--accent)">Obtainium</a> to manage self-developed apps directly from GitHub releases.</p>
      <ol style="margin-top:12px">
        <li>Install <a href="https://github.com/ImranR98/Obtainium/releases/latest" target="_blank" rel="noopener" style="color:var(--accent)">Obtainium</a> on your Android device</li>
        <li>Add Stash It: <code>https://github.com/cmwen/stash-it-app</code></li>
        <li>Obtainium will automatically check for updates and notify you</li>
      </ol>
      <p style="margin-top:12px;font-size:0.9em;opacity:0.8">Or download APKs manually from <a href="https://github.com/cmwen/stash-it-app/releases/latest" target="_blank" rel="noopener" style="color:var(--accent)">GitHub Releases</a>.</p>
    </div>

    <div class="card">
      <h3>Build from Source - Prerequisites</h3>
      <ul>
        <li>Flutter SDK 3.10.1 or higher</li>
        <li>Dart 3.10.1 or higher</li>
        <li>Java 17 or higher (for Android builds)</li>
        <li>Android Studio or Android SDK</li>
        <li>Node 18+ (for the website, not required for the app)</li>
      </ul>
    </div>

    <div class="card">
      <h3>Clone the Repository</h3>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">git clone https://github.com/cmwen/stash-it-app.git
cd stash-it-app</pre>
    </div>

    <div class="card">
      <h3>Install Dependencies & Generate Code</h3>
      <p>Stash It uses Drift (SQLite) and Riverpod with code generation. Run these commands before the first build:</p>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto"># Get dependencies
flutter pub get

# Generate database and provider code
dart run build_runner build --delete-conflicting-outputs</pre>
    </div>

    <div class="card">
      <h3>Run Locally</h3>
      <p>Run on a connected Android device or emulator:</p>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">flutter run</pre>
    </div>

    <div class="card">
      <h3>Build Release Artifacts</h3>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">flutter build apk         # Android APK (62MB, ~24s)
flutter build appbundle   # Play Store (Android App Bundle)</pre>
      <p style="margin-top:8px;font-size:0.9em"><em>Note: Build times optimized in v1.6.0+. Requires Java 17+</em></p>
    </div>

    <div class="card">
      <h3>Run Tests</h3>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">flutter test              # Run all tests
flutter test --coverage   # With coverage
flutter analyze           # Static analysis</pre>
    </div>

    <div class="card">
      <h3>Project Structure</h3>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">lib/
â”œâ”€â”€ main.dart             # App entry point
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ router/           # GoRouter navigation
â”‚   â””â”€â”€ theme/            # Material 3 theming
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ articles/         # Save, read, manage articles
â”‚   â””â”€â”€ settings/         # App preferences
â””â”€â”€ shared/
    â””â”€â”€ widgets/          # Reusable components</pre>
    </div>

    <div class="card">
      <h3>Website (Optional)</h3>
      <p>To work on the documentation website:</p>
      <pre style="background:rgba(255,255,255,0.02);padding:10px;border-radius:8px;overflow:auto">cd astro
npm install
npm run dev</pre>
    </div>

    <div class="card">
      <h3>Need Help?</h3>
      <p>Open an issue or pull request on the <a href="https://github.com/cmwen/stash-it-app" target="_blank" rel="noopener" style="color:var(--accent)">GitHub repository</a>. For CI or release problems check <code>.github/workflows/</code>.</p>
    </div>
  </section>
</BaseLayout>

<style>
  .card.highlight {
    border: 2px solid var(--accent);
    background: rgba(103, 80, 164, 0.1);
  }
  .card.highlight h3 {
    color: var(--accent);
  }
</style>
